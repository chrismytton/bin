#!/bin/sh
set -e

#/ Usage: dotfiles install [<path>]
#/
#/ Symlinks the dotfiles into <path> or into $HOME is none is given. If the
#/ dotfiles are not installed (because the script is running remotely) then
#/ the script will first clone the dotfiles into <path>.
#/
#/ If you decide to install your files at a different 'path' then you will
#/ also need to change the 'ZSH' variable at the top of `~/.zshrc'.

DOTFILES=${1:-"$HOME/.dotfiles"}

if [ ! -d "$DOTFILES" ]; then
  echo "Cloning dotfiles into $DOTFILES" >&2
  git clone -q "https://github.com/hecticjeff/dotfiles" "$DOTFILES"
fi

# Symlink all the dotfiles.
cd "$DOTFILES"
bin/dotfiles-ln "$DOTFILES"

# Tell the user how to get an easy `~/gitconfig`.
if [ ! -f "$HOME/.gitconfig" ]; then
  echo "No ~/.gitconfig detected, run 'git create-config' to create one." >&2
fi
